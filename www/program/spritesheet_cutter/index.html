<html lang="en">
  <head>
    <meta charset="utf-8">
    
    <meta name="description" content="Wojtek (Wojciech) Pachowiak's own webpage!">
    <title>Wojtek Pachowiak</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=0" /> 

    <link rel="icon" type="image/x-icon" href="/resources/icons/asuka.ico" />

    <link rel="stylesheet" href="/index.css" />



  </head>

  <body class="leading-snug tracking-tight font-mono text-sm" >
    <script src="main.js" type="module"></script>

    <script type="module">
      import tutorialmp4 from "./tutorial.mp4";
      document.getElementById("tutorialmp4").href = tutorialmp4;
    </script>





    <!-- split in two panes -->
    <div class="flex flex-row h-full overflow-x-hidden items-center relative">
      
      <!-- area for dropping files to -->
      <div class="flex-grow h-full bg-gray-200 z-10" id="leftPane">

        <!-- before uploading a file -->
        <div
          class="flex flex-col h-full items-center justify-center"
          id="spritesheetCanvasBeforeUpload"
        >
          <div class="flex flex-col items-center justify-center">
            <p class="text-2xl tracking-wide text-center italic  font-serif">Drop your spritesheet here</p>
            <p class="text-sm">or click to select</p>
            <input
              type="file"
              id="filePicker"
              name="filePicker"
              class="hidden"
            />
            <label
              for="filePicker"
              class="btn-simple"
              >Select file</label
            >
          </div>
        </div>

        <!-- after uploading a file -->
        <div
          class=" flex flex-col h-full items-center justify-center hidden"
          id="spritesheetCanvasAfterUpload"
        >
          <div class="flex flex-col items-center justify-center">
          <canvas id="spritesheetCanvas" class="absolute z-10" style="image-rendering: pixelated;"></canvas>
          </div>
        </div>
      </div>


      <!-- right bar for setting -->
      <div class="w-80 flex-initial h-full z-50 bh-white overflow-y-scroll overflow-x-hidden  pt-10  border-l border-black" id="rightPane">

        <div class="flex flex-col  h-full  px-8">

          <!-- info panekl-->
          <div class="pb-5">
            <h1 class="text-2xl pb-5 text-center scale-[1.3] italic leading-[1.5rem] font-bold font-serif">SPRITESHEET CUTTER</h1>
            <p class="text-justify"> 
              A tool to cut spritesheets (or any kind of images seperated by a uniform background) into individual sprites. 
            </p>

            <h1 class="text-2xl pt-5 pb-2 text-center italic  font-serif">How to use</h1>
            <p class="text-justify">
            Upload an image with a uniform background ("Select file"), eyedrop it ("Pick background") and finally press "Calculate bounds". 
            You will see red boundig boxes, that can be exported as .json ("Download .json coordiantes") data or as images ("Download separated images").  
            See full <a id="tutorialmp4"  class=" underline underline-offset-2 hover:underline-offset-1" target="_blank">tutorial</a>.
          </p>
          

            <h1 class="text-2xl pt-5 pb-2  text-center italic  font-serif">Algorithm</h1>
              <ol class="list-decimal	list-inside	">
                <li> 
                  Iterate over the image and find the first non-background pixel.
                </li>
                <li>
                  From this pixel, perform a flood fill (using a queue) to find the bounds of the sprite.
                </li>
                <li>
                When finished add these bounds to the bounds array.
                </li>
                <li>
                  Repeat until all sprites are found.
                </li>
              </ol>
        </div>

          <!-- guziki -->
          <div class="flex  flex-col pb-10">
            <!-- zoom in zoom out spritesheet -->
            <button
              id="zoomIn"
              class="btn-simple"
              disabled
            >
              Zoom in
            </button>
            <button
              id="zoomOut"
              class="btn-simple"
              disabled
            >
              Zoom out
            </button>

            
            <!-- remove spritesheet -->
            <button
            id="removeSpritesheet"
            class="btn-simple"
            disabled
            >
            Remove spritesheet
          </button>
          
          <!-- separator -->
          <div class="my-2"></div>

            <!-- Calculate bounds -->
            <button
              id="calculateBounds"
              class="btn-simple"
              disabled
            >
              Calculate bounds
            </button>

            <!-- eyedropper -->
            <div class="flex flex-row">
              <label for="colorPicker">Pick background: </label>
              <input type="color" class="cursor-pointer flex-grow mx-2 border-none bg-white" id="colorPicker" name="colorPicker" />
            </div>

          <!-- separator -->
          <div class="my-2"></div>


          <!-- Downloads -->
            <button
              id="parseableCoordinates"
              class="btn-simple"
              disabled
            >
              Download .json coordinates
            </button>

            <button
              id="seperateImages"
              class="btn-simple"
              disabled
            >
              Download separated images
            </button>
            
           


          </div>
        </div>
      </div>

      
    </div>

    <script type="module"></script>

    
  </body>
</html>
